/*INSERT TABLA CATEGORIAS*/
INSERT INTO CATEGORIAS(NOMBRE_CAT,DESCRIPCION) VALUES ('LIMPIEZA','SERVICIO DE LIMPIEZA POR DIAS-MESES-AÃ‘OS')
INSERT INTO CATEGORIAS(NOMBRE_CAT,DESCRIPCION) VALUES ('MANTENIMIENTO','MANTENIMIENTO PARA TUS EQUIPOS COMO LO SON LIMPIEZA,REPARACION,GENERAL,PREVENTIVO,ETC.')
INSERT INTO CATEGORIAS(NOMBRE_CAT,DESCRIPCION) VALUES ('CONSTRUCCION','TRABAJO DE PREEDIFICACION, CONSTRUCCION Y REPARACION, ALTERACION, RESTAURACION Y TRABAJO DE MANTENIMIENTO A CONSTRUCCIONES RESIDENCIALES,CONSTRUCCIONES NO RESIDENCIALES O TRABAJOS DE INGENIERIA CIL.')


/*CREACION DE LA TABLA FACTURAS*/
CREATE TABLE FACTURAS(
N_FACTURA INT IDENTITY(1,1) PRIMARY KEY,
FECHA DATE NOT NULL,
HORA TIME NOT NULL,
TOTAL DECIMAL NOT NULL,
ID_USUARIO_FK INT REFERENCES USUARIOS(ID_USUARIO)
)

/*CREACION DE LA TABLA DETALLE_FACTURAS*/
CREATE TABLE DETALLE_FACTURAS(
ID_SERVICIO_FK INT REFERENCES SERVICIOS(ID_SERVICIO),
N_FACTURA_FK INT REFERENCES FACTURAS(N_FACTURA),
CANTIDAD INT NOT NULL,
PRECIO DECIMAL NOT NULL,
SUBTOTAL DECIMAL NOT NULL,
COMISION DECIMAL NOT NULL,
CALIFICACION INT NOT NULL,
COMENTARIOS VARCHAR(MAX)
)

/*PROCEDIMIENTO ALMACENADO PARA CONSULTAR SERVICIOS - INNER JOIN RELACIONAR TABLA CATEGORIAS Y SERVICIOS*/
CREATE PROCEDURE CONSULTAR_SERVICIOS
AS
BEGIN
	SELECT NOMBRE_CAT,IMAGEN,NOMBRE,PRECIO,TERMINOS FROM CATEGORIAS INNER JOIN SERVICIOS
	ON CATEGORIAS.ID_CATEGORIA = SERVICIOS.ID_CATEGORIA_FK
END

EXEC CONSULTAR_SERVICIOS