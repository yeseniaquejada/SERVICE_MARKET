CREATE DATABASE SERVICE_MARKET
USE SERVICE_MARKET

/*CREACION DE LA TABLA ROLES*/
CREATE TABLE ROLES(
ID_ROL INT IDENTITY(1,1) PRIMARY KEY,
DESCRIPCION VARCHAR(40) NOT NULL)

/*CREACION DE LA TABLA USUARIOS*/
CREATE TABLE USUARIOS(
IDENTIFICACION_U VARCHAR(15) PRIMARY KEY,
TIPO_DOC VARCHAR(40) NOT NULL,
NOMBRE VARCHAR(60) NOT NULL,
APELLIDOS VARCHAR(70) NOT NULL,
CELULAR VARCHAR(12) NOT NULL,
CORREO_ELECTRONICO VARCHAR(100) NOT NULL,
CONTRASENA VARCHAR(8) NOT NULL,
FECHA_NACIMIENTO DATE NOT NULL,
ID_ROL_FK INT REFERENCES ROLES(ID_ROL))

/*CREACION DE LA TABLA CATEGORIAS*/
CREATE TABLE CATEGORIAS(
ID_CATEGORIA INT IDENTITY(1,1) PRIMARY KEY,
NOMBRE VARCHAR(50) NOT NULL,
DESCRIPCION VARCHAR(40) NOT NULL)

/*CREACION DE LA TABLA SERVICIOS*/
CREATE TABLE SERVICIOS(
ID_SERVICIO INT IDENTITY(1,1) PRIMARY KEY,
IMAGEN VARBINARY(MAX) NOT NULL,
NOMBRE VARCHAR(70) NOT NULL,
PRECIO DECIMAL NOT NULL,
TERMINOS VARCHAR(MAX) NOT NULL,
ID_CATEGORIA_FK INT REFERENCES CATEGORIAS(ID_CATEGORIA))

/*CREACION DE LA TABLA PUBLICACION*/
CREATE TABLE PUBLICACION(
ID_SERVICIO_FK INT REFERENCES SERVICIOS(ID_SERVICIO),
IDENTIFICACION_U_FK VARCHAR(15) REFERENCES USUARIOS(IDENTIFICACION_U),
FECHA_INICIO DATE NOT NULL,
FECHA_FIN DATE NOT NULL)

/*CREACION DE LA TABLA CLIENTES*/
CREATE TABLE CLIENTES(
IDENTIFICACION_C VARCHAR(15) PRIMARY KEY,
TIPO_DOC VARCHAR(40) NOT NULL,
NOMBRE VARCHAR(60) NOT NULL,
APELLIDOS VARCHAR(70) NOT NULL,
CELULAR VARCHAR(12) NOT NULL,
CORREO_ELECTRONICO VARCHAR(100) NOT NULL,
CONTRASENA VARCHAR(8) NOT NULL,
FECHA_NACIMIENTO DATE NOT NULL,
DIRECCION VARCHAR(50) NOT NULL)

/*CREACION DE LA TABLA FACTURAS*/
CREATE TABLE FACTURAS(
N_FACTURA INT IDENTITY(1,1) PRIMARY KEY,
FECHA DATE NOT NULL,
HORA TIME NOT NULL,
TOTAL DECIMAL NOT NULL,
IDENTIFICACION_U_FK VARCHAR(15) REFERENCES USUARIOS(IDENTIFICACION_U),
IDENTIFICACION_C_FK VARCHAR(15) REFERENCES CLIENTES(IDENTIFICACION_C)
)

/*CREACION DE LA TABLA DETALLE_SERVICIO*/
CREATE TABLE DETALLE_SERVICIO(
ID_SERVICIO_FK INT REFERENCES SERVICIOS(ID_SERVICIO),
N_FACTURA_FK INT REFERENCES FACTURAS(N_FACTURA),
CANTIDAD INT NOT NULL,
PRECIO DECIMAL NOT NULL,
SUBTOTAL DECIMAL NOT NULL,
COMISION DECIMAL NOT NULL,
CALIFICACION INT NOT NULL,
COMENTARIOS VARCHAR(MAX)
)
